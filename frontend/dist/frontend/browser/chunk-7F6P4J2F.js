import{c as F}from"./chunk-BMBIHSAK.js";import{a as N}from"./chunk-LY47KOC7.js";import{$ as w,$a as u,Ia as O,J as _,Ma as g,Mb as y,Nb as k,Ob as z,Pb as I,Rb as T,Ta as p,U as m,Ua as t,Va as e,Xa as S,Ya as P,Za as D,_ as C,_a as l,ac as L,fb as i,gb as v,hb as d,j as h,m as f,pb as b,qb as M,rb as E,ta as o,y as x}from"./chunk-TMWIUII4.js";function W(a,n){if(a&1){let r=D();t(0,"div",22)(1,"div",23)(2,"span",24),i(3),e(),t(4,"span",25),i(5),e()(),t(6,"p")(7,"strong"),i(8,"Barbiere:"),e(),i(9),e(),t(10,"p")(11,"strong"),i(12,"Data Richiesta:"),e(),i(13),b(14,"date"),e(),t(15,"p",26),i(16),e(),t(17,"button",27),l("click",function(){let c=C(r).$implicit,A=u(3);return w(A.removeFromWaitingList(c.id))}),i(18," \u{1F5D1}\uFE0F Rimuovi dalla Coda "),e()()}if(a&2){let r=n.$implicit,s=n.index,c=u(3);o(3),v(c.getServiceName(r.service)),o(2),d("Posizione: ",s+1),o(4),d(" ",c.getBarberFullName(r.barber)),o(4),d(" ",E(14,5,r.dataRichiesta,"dd/MM/yyyy")),o(3),v(c.getWaitingStatusMessage(r))}}function j(a,n){if(a&1&&(S(0),t(1,"h2"),i(2,"\u23F3 Lista d'Attesa"),e(),t(3,"div",20),g(4,W,19,8,"div",21),e(),P()),a&2){let r=u().ngIf;o(4),p("ngForOf",r)}}function $(a,n){if(a&1&&(t(0,"section",18),g(1,j,5,1,"ng-container",19),e()),a&2){let r=n.ngIf;o(),p("ngIf",r.length>0)}}var B=class a{apiService=m(N);authService=m(L);router=m(F);customerName="Cliente";refreshWaitingList$=new h(void 0);waitingList$=this.refreshWaitingList$.pipe(_(()=>{let n=this.authService.getDecodedToken();return!n||typeof n.id!="number"?f([]):this.apiService.getWaitingListByCustomerId(n.id)}),x(n=>(console.error("Error fetching waiting list:",n),f([]))));ngOnInit(){let n=this.authService.getDecodedToken();n&&n.sub&&(this.customerName=n.sub.split("@")[0])}navigateToBooking(){this.router.navigate(["/book"])}removeFromWaitingList(n){confirm("Vuoi rimuoverti dalla lista d'attesa?")&&this.apiService.removeFromWaitingList(n).subscribe(()=>{this.refreshWaitingList$.next()},r=>{console.error("Error removing from waiting list:",r)})}getServiceName(n){return n?.nome??"Servizio"}getBarberFullName(n){if(!n)return"Non assegnato";let r=[n.nome,n.cognome].filter(Boolean);return r.length>0?r.join(" "):"Non assegnato"}getWaitingStatusMessage(n){switch(n.stato){case"IN_ATTESA":return"In attesa di disponibilit\xE0";case"NOTIFICATO":return"Hai ricevuto una notifica di disponibilit\xE0";case"CONFERMATO":return"Appuntamento confermato";case"SCADUTO":return"La richiesta \xE8 scaduta";case"ANNULLATO":return"Richiesta annullata";default:return"Stato non disponibile"}}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=O({type:a,selectors:[["app-customer-dashboard"]],decls:73,vars:5,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"dashboard-user"],[1,"user-icon"],[1,"user-name"],[1,"btn","btn-secondary","logout-button",3,"click"],[1,"hero-section"],[1,"hero-content"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"btn","btn-primary","btn-large",3,"click"],["class","waiting-list-section",4,"ngIf"],[1,"why-choose-us"],[1,"features-grid"],[1,"feature-card"],[1,"feature-icon"],[1,"cta-section"],[1,"cta-content"],[1,"waiting-list-section"],[4,"ngIf"],[1,"waiting-list-cards"],["class","waiting-card",4,"ngFor","ngForOf"],[1,"waiting-card"],[1,"waiting-header"],[1,"waiting-service"],[1,"position-badge"],[1,"waiting-status"],[1,"btn","btn-outline",3,"click"]],template:function(r,s){r&1&&(t(0,"div",0)(1,"header",1)(2,"div",2)(3,"span",3),i(4,"\u{1F464}"),e(),t(5,"span",4),i(6),e()(),t(7,"button",5),l("click",function(){return s.logout()}),i(8," \u{1F6AA} Logout "),e()(),t(9,"section",6)(10,"div",7)(11,"h1",8),i(12),e(),t(13,"p",9),i(14," Prenota il tuo taglio perfetto con i migliori barbieri della citt\xE0 "),e(),t(15,"button",10),l("click",function(){return s.navigateToBooking()}),i(16," \u{1F4C5} Prenota Ora "),e()()(),g(17,$,2,1,"section",11),b(18,"async"),t(19,"section",12)(20,"h2"),i(21,"\u2728 Perch\xE9 Scegliere la Nostra Barberia"),e(),t(22,"div",13)(23,"div",14)(24,"div",15),i(25,"\u{1F468}\u200D\u{1F4BC}"),e(),t(26,"h3"),i(27,"Barbieri Esperti"),e(),t(28,"p"),i(29,"Professionisti con oltre 10 anni di esperienza nel settore"),e()(),t(30,"div",14)(31,"div",15),i(32,"\u23F0"),e(),t(33,"h3"),i(34,"Prenotazione Online"),e(),t(35,"p"),i(36,"Prenota quando vuoi, 24/7, con conferma immediata"),e()(),t(37,"div",14)(38,"div",15),i(39,"\u{1F48E}"),e(),t(40,"h3"),i(41,"Servizi Premium"),e(),t(42,"p"),i(43,"Prodotti di alta qualit\xE0 e trattamenti personalizzati"),e()(),t(44,"div",14)(45,"div",15),i(46,"\u{1F3C6}"),e(),t(47,"h3"),i(48,"Miglior Prezzo"),e(),t(49,"p"),i(50,"Qualit\xE0 superiore a prezzi competitivi e convenienti"),e()(),t(51,"div",14)(52,"div",15),i(53,"\u{1F3AF}"),e(),t(54,"h3"),i(55,"Stile su Misura"),e(),t(56,"p"),i(57,"Consulenza personalizzata per il taglio perfetto per te"),e()(),t(58,"div",14)(59,"div",15),i(60,"\u{1F514}"),e(),t(61,"h3"),i(62,"Lista d'Attesa"),e(),t(63,"p"),i(64,"Sistema FIFO automatico se il giorno \xE8 pieno"),e()()()(),t(65,"section",16)(66,"div",17)(67,"h2"),i(68,"\u{1F680} Pronto per il Tuo Nuovo Look?"),e(),t(69,"p"),i(70,"Prenota ora e vivi l'esperienza della migliore barberia della citt\xE0!"),e(),t(71,"button",10),l("click",function(){return s.navigateToBooking()}),i(72," \u2702\uFE0F Prenota il Tuo Servizio "),e()()()()),r&2&&(o(6),v(s.customerName),o(6),d("\u{1F488} Benvenuto, ",s.customerName,"!"),o(5),p("ngIf",M(18,3,s.waitingList$)))},dependencies:[T,y,k,z,I],styles:[".dashboard-container[_ngcontent-%COMP%]{min-height:100vh;padding-bottom:var(--spacing-xl)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:#fffc;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);position:sticky;top:0;z-index:100;border-bottom:1px solid rgba(0,0,0,.05)}.dashboard-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-weight:600;color:var(--color-text-primary)}.user-icon[_ngcontent-%COMP%]{font-size:1.5rem;background:var(--color-primary-light);width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%}.logout-button[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem}.hero-section[_ngcontent-%COMP%]{padding:var(--spacing-lg) var(--spacing-md);text-align:center;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-active) 100%);color:var(--color-white);border-radius:0 0 var(--radius-xl) var(--radius-xl);margin-bottom:var(--spacing-lg);box-shadow:var(--shadow-primary)}.welcome-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-xs);color:var(--color-white)}.welcome-subtitle[_ngcontent-%COMP%]{opacity:.9;margin-bottom:var(--spacing-md);font-size:1rem}.appointments-section[_ngcontent-%COMP%], .waiting-list-section[_ngcontent-%COMP%], .why-choose-us[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto var(--spacing-xl);padding:0 var(--spacing-md)}.appointments-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.appointments-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:var(--spacing-sm)}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);overflow-x:auto;padding-bottom:var(--spacing-xs);-webkit-overflow-scrolling:touch;scrollbar-width:none}.filter-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.filter-chip[_ngcontent-%COMP%]{white-space:nowrap;padding:.5rem 1.25rem;border-radius:var(--radius-full);background:#ffffff80;border:1px solid rgba(0,0,0,.1);color:var(--color-text-secondary);font-weight:600;font-size:.9rem;transition:all var(--transition-fast)}.filter-chip.active[_ngcontent-%COMP%]{background:var(--color-primary);color:var(--color-white);border-color:var(--color-primary);box-shadow:var(--shadow-primary)}.appointments-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:var(--spacing-md)}.appointment-card[_ngcontent-%COMP%]{background:var(--color-surface);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));border:1px solid var(--color-surface-border);border-radius:var(--radius-lg);padding:var(--spacing-md);box-shadow:var(--shadow-sm);transition:transform var(--transition-fast)}.appointment-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.appointment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm);padding-bottom:var(--spacing-xs);border-bottom:1px solid rgba(0,0,0,.05)}.service-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:var(--color-text-primary)}.status-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 8px;border-radius:var(--radius-sm);font-weight:600;text-transform:uppercase}.badge-confirmato[_ngcontent-%COMP%]{background:#388e3c1a;color:var(--color-success)}.badge-pending[_ngcontent-%COMP%]{background:#ff8c001a;color:var(--color-primary)}.badge-annullato[_ngcontent-%COMP%]{background:#d32f2f1a;color:var(--color-error)}.appointment-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.95rem;color:var(--color-text-secondary);display:flex;justify-content:space-between}.appointment-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text-primary)}.btn-cancel[_ngcontent-%COMP%]{margin-top:var(--spacing-md);width:100%;padding:.75rem;font-size:.9rem}.waiting-list-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.waiting-card[_ngcontent-%COMP%]{background:#fff;border-left:4px solid var(--color-primary);border-radius:var(--radius-md);padding:var(--spacing-md);box-shadow:var(--shadow-sm);position:relative;overflow:hidden}.waiting-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm)}.position-badge[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;padding:2px 8px;border-radius:var(--radius-sm);font-size:.8rem;font-weight:700}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-sm)}.feature-card[_ngcontent-%COMP%]{background:#fff9;padding:var(--spacing-md);border-radius:var(--radius-lg);text-align:center;border:1px solid rgba(0,0,0,.05)}.feature-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-xs)}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:4px}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-secondary);line-height:1.3}.cta-section[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl) var(--spacing-md);margin-bottom:80px}@media (min-width: 769px){.features-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.dashboard-header[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-xl)}.hero-section[_ngcontent-%COMP%]{border-radius:var(--radius-xl);margin:var(--spacing-md)}}"],changeDetection:0})};export{B as CustomerDashboardComponent};
